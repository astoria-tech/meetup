---
import type { HydratedFeedItem } from "../types";
import Card from "../components/Card.astro";

type Props = HydratedFeedItem & { heading?: "h1" | "h2" | "h3" };

// Default heading to h2 if not provided, access event for links
const {
  heading: Heading,
  title,
  content,
  permalink,
  event,
} = {
  heading: "h2",
  ...Astro.props,
};
---

<div class="bg-white rounded-lg border border-green-200 p-6 hover:shadow-md transition-shadow duration-200">
  <header class="mb-4">
    <Heading class:list={["text-xl", "font-semibold", "mb-2"]}>
      <a
        href={permalink}
        class="text-emerald-900 hover:text-emerald-600 transition-colors duration-200 no-underline"
      >
        {title}
      </a>
    </Heading>
    {event.data.date && (
      <div class="text-emerald-600 text-sm">
        {new Date(event.data.date).toLocaleDateString('en-US', { 
          weekday: 'long', 
          year: 'numeric', 
          month: 'long', 
          day: 'numeric',
          hour: 'numeric',
          minute: '2-digit'
        })}
      </div>
    )}
  </header>

  <main class="prose prose-emerald prose-sm max-w-none mb-4 text-emerald-800">
    <Fragment set:html={content} />
  </main>

  {
    (event.data.meetup || event.data.googleCal) && (
      <footer class="flex flex-wrap gap-3">
        {event.data.meetup && (
          <a
            href={event.data.meetup}
            target="_blank"
            rel="noopener noreferrer"
            class="inline-flex items-center gap-2 bg-emerald-100 hover:bg-emerald-200 text-emerald-800 font-semibold py-2.5 px-4 rounded-lg text-sm transition-colors duration-200 border border-emerald-200"
          >
            RSVP on Meetup
          </a>
        )}
        {event.data.googleCal && (
          <a
            href={event.data.googleCal}
            target="_blank"
            rel="noopener noreferrer"
            class="inline-flex items-center gap-2 bg-green-100 hover:bg-green-200 text-green-800 font-semibold py-2.5 px-4 rounded-lg text-sm transition-colors duration-200 border border-green-200"
          >
            Add to Google Calendar
          </a>
        )}
      </footer>
    )
  }
</div>
